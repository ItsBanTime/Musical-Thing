<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple P5.js Game</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
      body {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        margin: 0;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <script>
      let bgImage;
      let points = 0;
      let laptopMessage = "";
      let phoneMessage = "";
      let creatureMessage = "";
      let showOptions = false;

      function preload() {
        bgImage = loadImage('./spookytimeFR.jpg');
      }

      function setup() {
        let canvas = createCanvas(1000, 1000);
        canvas.parent(document.body);
      }

      function draw() {
        if (bgImage) {
          background(bgImage);
        } else {
          background(200);
        }
        displayPoints();
        fill(0);
        ellipse(mouseX, mouseY, 50, 50); // Draw a circle that follows the mouse
        displayCoordinates();
        checkInteractiveZones();
        displayPhoneMessage();
        displayLaptopMessage();
        displayCreatureMessage();
        displayOptions();
        if (!showOptions) {
          laptopMessage = "";
          phoneMessage = "";
          creatureMessage = "";
        }
      }

      function displayCoordinates() {
        fill(255);
        textSize(16);
        text(`X: ${mouseX}, Y: ${mouseY}`, 10, height - 10); // Display mouse coordinates in the bottom-left corner
      }

      function displayPoints() {
        fill(255, 0, 0); // Ensure points are always displayed on top of background
        textSize(32);
        textAlign(RIGHT, TOP);
        text(`Points: ${points}`, width - 10, 10); // Display points in the top-right corner
      }

      function displayPhoneMessage() {
        if (phoneMessage !== "") {
          fill(255, 0, 0);
          textSize(32);
          textAlign(CENTER, CENTER);
          text(phoneMessage, width / 2, height / 2); // Display the phone message on the canvas
        }
      }

      function displayLaptopMessage() {
        if (laptopMessage !== "") {
          fill(255, 0, 0);
          textSize(32);
          textAlign(CENTER, CENTER);
          text(laptopMessage, width / 2, height / 2); // Display the laptop message on the canvas
        }
      }

      function displayCreatureMessage() {
        if (creatureMessage !== "") {
          fill(255, 0, 0);
          textSize(32);
          textAlign(CENTER, CENTER);
          text(creatureMessage, width / 2, height / 2); // Display the creature message on the canvas
        }
      }

      function displayOptions() {
        if (showOptions) {
          fill(0, 255, 0);
          textSize(24);
          textAlign(CENTER, TOP);
          text('1. Ignore', width / 2, height / 2 + 50);
          text('2. Getting off now, I will be right there', width / 2, height / 2 + 80);
        } else if (phoneMessage === "Text from Anna: You're picking up the beer right? Where are you?") {
          fill(0, 255, 0);
          textSize(24);
          textAlign(CENTER, TOP);
          text('1. Why do I always have to buy beer? You do it!', width / 2, height / 2 + 50);
          text('2. I will be right there, Coors Banquet good with you?', width / 2, height / 2 + 80);
        }
      }

      function checkInteractiveZones() {
        let inZone = false;

        // Laptop screen zone (approx. bottom center)
        if (mouseX > 400 && mouseX < 600 && mouseY > 700 && mouseY < 900) {
          fill(255, 0, 0);
          textSize(20);
          text('Laptop Screen', mouseX + 10, mouseY + 10);
          inZone = true;
        }

        // Phone zone (approx. to the right of the laptop screen)
        if (mouseX > 650 && mouseX < 800 && mouseY > 800 && mouseY < 950) {
          fill(255, 0, 0);
          textSize(20);
          text('Phone', mouseX + 10, mouseY + 10);
          inZone = true;
        }

        // The Creature zone (approx. top center)
        if (mouseX > 450 && mouseX < 550 && mouseY > 50 && mouseY < 300) {
          fill(255, 0, 0);
          textSize(20);
          text('The Creature', mouseX + 10, mouseY + 10);
          inZone = true;
        }

        // Change cursor to pointer if in an interactive zone
        if (inZone) {
          cursor('pointer');
        } else {
          cursor('default');
        }
      }

      function mousePressed() {
        // Laptop screen zone click action
        if (mouseX > 400 && mouseX < 600 && mouseY > 700 && mouseY < 900) {
          console.log('Laptop screen clicked');
          points += 10;
          laptopMessage = "Email from Jerry: Dude, check your phone, everyone's wondering where you're at!";
          showOptions = true;
        }

        // Phone zone click action
        if (mouseX > 650 && mouseX < 800 && mouseY > 800 && mouseY < 950) {
          console.log('Phone clicked');
          points += 10;
          phoneMessage = "Text from Jerry- Dude, the party's about to start, where are you?";
          showOptions = true;
        }

        // The Creature zone click action
        if (mouseX > 450 && mouseX < 550 && mouseY > 50 && mouseY < 300) {
          console.log('The Creature clicked');
          points += 10;
          creatureMessage = "Hey buddy, did ya get my email?";
        }

        // Handle options click
        if (showOptions) {
          // Ignore option
          if (mouseX > width / 2 - 100 && mouseX < width / 2 + 100 && mouseY > height / 2 + 50 && mouseY < height / 2 + 70) {
            showOptions = false;
            laptopMessage = "";
            phoneMessage = "";
            creatureMessage = "";
          }

          // "Getting off now" option
          if (mouseX > width / 2 - 100 && mouseX < width / 2 + 100 && mouseY > height / 2 + 80 && mouseY < height / 2 + 100) {
            points += 500;
            showOptions = false;
            laptopMessage = "";
            phoneMessage = "";
            creatureMessage = "";
          }
        }

        // Handle options click for Anna's message
        if (phoneMessage === "Text from Anna: You're picking up the beer right? Where are you?") {
          // "Why do I always have to buy beer? You do it!" option
          if (mouseX > 20 && mouseX < 450 && mouseY > 100 && mouseY < 120) {
            points -= 500;
            phoneMessage = "";
            showOptions = false;
          }

          // "I'll be right there, Coors Banquet good with you?" option
          if (mouseX > 20 && mouseX < 600 && mouseY > 130 && mouseY < 150) {
            points += 500;
            phoneMessage = "";
            showOptions = false;
          }
        }
      }
    </script>
  </body>
</html>
